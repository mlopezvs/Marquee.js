/*Marquee.js|@author:ScottMunn.com|@version:0.6.1*/function activate_marquee_hashchange(){var a=window.location.hash;var b=$('.marquee-nav li a[href*="'+a+'"]');$("._autoCurrentHash").removeClass("_autoCurrentHash");$.each(b,function(){$('a[href*="'+a+'"]').not('.marquee-nav li a[href*="'+a+'"]').addClass("_autoCurrentHash");var b=$(this),c=b.parent("li").index(),d=b.parents(".marquee").first();d.marqueeGoTo(c)})}var global_marquee_settings={css_active_name:"current",fade_text:true,fade_text_selectors:"h1,.summary",hide_transitions:false,transition_speed:500,marquee_caption:"marquee_current_description",autoplay:false,autoplay_slide_duration:4e3,resizable:true,touchstartevent:"ontouchstart"in document.documentElement?"touchstart":"mousedown",touchendevent:"ontouchstart"in document.documentElement?"touchend":"mouseup",enableTouch:true,swipeThreshold:30};$.fn.marqueeize=function(a){var b=global_marquee_settings;if("onhashchange"in window){$(window).bind("hashchange",function(){activate_marquee_hashchange()})}if(window.location.hash){var c=window.location.hash;var d=$('.marquee-nav li a[href="'+c+'"]');if(d.length==1){index=d.parent("li").index();d.parent("li").addClass(b.css_active_name).siblings().removeClass(b.css_active_name);$("._autoCurrentHash").removeClass("_autoCurrentHash");$('a[href*="'+c+'"]').not('.marquee-nav li a[href*="'+c+'"]').addClass("_autoCurrentHash")}}return this.each(function(){var c=$(this);if(c.hasClass("fixed")){b.resizable=false}if(c.hasClass("hasBeenMarqueed")){}else{if(a){$.extend(b,a)}c.addClass("hasBeenMarqueed");c.find(".marquee-nav li").click(function(a){a.preventDefault();$(this).marqueeClick()});c.find(".marquee_prev").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("prev")});c.find(".marquee_next").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("next")});c.find(".marquee_first").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("first")});c.find(".marquee_last").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("last")});c.find(".marquee_random").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("random")});if(b.enableTouch){c.on(b.touchstartevent,function(a){if(b.touchstartevent=="mousedown"){a.preventDefault()}var c=a.pageX?a.pageX:a.originalEvent.changedTouches[0].pageX,d=a.pageY?a.pageY:a.originalEvent.changedTouches[0].pageY;$(this).data({start_x:c,start_y:d})});c.on(b.touchendevent,function(a){var c,d,e=a.pageX?a.pageX:a.originalEvent.changedTouches[0].pageX,f=a.pageY?a.pageY:a.originalEvent.changedTouches[0].pageY;var g=$(this).data("start_x")-e,h=$(this).data("start_y")-f;if(g<0){c="left"}else if(g>0){c="right"}if(h<0){d="up"}else if(h>0){d="down"}if(g>h){if(c=="left"&&Math.abs(g)>b.swipeThreshold){if($(this).find(".marquee-panel."+b.css_active_name).index()!=0){$(this).marqueeGoTo("prev")}else{var i=$(this).find(".marquee-panels").css("margin-left").replace("px","");$(this).find(".marquee-panels").animate({"margin-left":i+40},200).animate({"margin-left":i},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing")}}else if(c=="right"&&Math.abs(g)>b.swipeThreshold){if($(this).find(".marquee-panel."+b.css_active_name).index()!=$(this).attr("data-original-length")-1){$(this).marqueeGoTo("next")}else{var i=$(this).find(".marquee-panels").css("margin-left").replace("px","");$(this).find(".marquee-panels").animate({"margin-left":i-40},200).animate({"margin-left":i},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing")}}}$(this).data({start_x:null,end_x:null})})}c.find(".marquee-nav .caption").hide();c.each(function(){var a=$(this),c=0;var d=a.find(".marquee-nav").first().find("."+b.css_active_name);if(d.length>0){c=d.index()}else{}if(c==0){a.marqueeGoTo("initialize")}else{a.marqueeGoTo(c)}var e=a.find(".marquee-panels").first().children(".marquee-panel").length;a.attr("data-original-length",e);if(a.find(".counter .total").length>0){a.find(".counter .total").html(e)}})}})};$.fn.marqueeClick=function(a){var b=global_marquee_settings;return this.each(function(){if(a){$.extend(b,a)}if($(this).hasClass(b.css_active_name)){return}var c=$(this),d=$(this).parents(".marquee").first(),e=$(this).index();c.addClass(b.css_active_name);$(d).marqueeGoTo(e)})};$.fn.marqueeAutoplay=function(){return this.each(function(){var a=$(this);a.hover(function(){$.data(this,"hover",true)},function(){$.data(this,"hover",false)}).data("hover",false).data("autoplay",true);a.find(".marquee-nav").click(function(){a.data("autoplay",false)});$(this).marqueeAutoplayEnable()})};$.fn.marqueeAutoplayEnable=function(){var a=$(this);var b=setInterval(function(){if(!a.data("hover")&&a.data("autoplay")){a.marqueeGoTo("next")}},global_marquee_settings.autoplay_slide_duration);a.hover(function(){clearInterval(b)},function(){b=setInterval(function(){if(!a.data("hover")&&a.data("autoplay")){a.marqueeGoTo("next")}},global_marquee_settings.autoplay_slide_duration)}).removeClass("autoplay-off").addClass("autoplay-on")};$.fn.marqueeGoTo=function(a,b){if(a==null){a=0}var c=global_marquee_settings;var d=$(this);return this.each(function(){var d=$(this),e=d.find(".marquee-panels").first().children("."+c.css_active_name).index(),f=d.find(".marquee-panels").first().children(".marquee-panel").length-1;if(e==-1){e=0}switch(a){case"initialize":e=-1;a=0;c.fade_text=false;var g=true;var h=true;break;case"next":a=parseInt(e+1);break;case"prev":case"previous":a=parseInt(e-1);break;case"last":a=f;break;case"first":a=0;break;case"random":a=e;while(a==e){a=Math.floor(Math.random()*(parseInt(f)+1))}break}if(d.hasClass("infinite")==true){var i=d.find(".marquee-panels").first(),j=$(i).children(".marquee-panel"),k=i.width();if(a>f){j.clone().appendTo(i);i.width(k*2);f=f*2+1}if(a<0){a=f;j.clone().prependTo(i);i.width(k*2);f=f*2+1;a=f;var g=true}}else{if(a<0){a=f}if(a>f){a=0}}if(b!=null){a=b}if(e!=a){var l=d.find(".marquee-panels").first(),m=d.find(".marquee-viewport").first(),n=d.find(".marquee-nav").first(),o=d.find(".marquee-panels").first().find(".marquee-panel:eq("+a+")"),p=o.outerHeight(),q=o.position(),r=l.css("margin-left").replace("px",""),s=parseInt(q.left,10)-parseInt(r,10),t=$(c.fade_text_selectors,d);var u=d.css("padding-left").replace("px","");s=parseInt(s,10)-parseInt(u,10);n.find("."+c.css_active_name).removeClass(c.css_active_name);n.find("li:eq("+a+")").addClass(c.css_active_name);d.find(".marquee-panels").first().children("."+c.css_active_name).removeClass(c.css_active_name);o.addClass(c.css_active_name);d.find(".counter .index").html(parseInt(a)+1);if(d.find("."+c.marquee_caption).length){var v=$(n).find("li:eq("+a+") .caption").html();if(v==null){var v=$(n).find("li:eq("+a+")").attr("title")}if(v){$(d).find("."+c.marquee_caption).fadeTo(500,1).html(v)}else{$(d).find("."+c.marquee_caption).fadeTo(500,0)}}s=s*-1;if(c.hide_transitions&&e!=-1||g==true){var w=d.find("h1,.summary");if(w.length>0){w.fadeTo(10,0,function(){l.css({"margin-left":s},1e3,"swing",function(){w.fadeTo(10,1);if(c.resizable==true){m.css({height:p+"px"});l.css({height:p+"px"})}})})}else{l.css({"margin-left":s},1e3,"swing",function(){w.fadeTo(10,1);if(c.resizable==true){m.css({height:p+"px"});l.css({height:p+"px"})}})}}else{if(c.fade_text){t.fadeTo(400,.1)}if($(d).hasClass("fast")==true){c.transition_speed=1}l.animate({"margin-left":s},c.transition_speed,"swing",function(){if(c.resizable==true&&p!=m.height()){m.animate({height:p+"px"},c.transition_speed/2);l.animate({height:p+"px"},c.transition_speed/2)}})}}var x=$(d).attr("data-original-length");if(x!=null){$("#current_slide").text(a%x+1+"/"+x)}else{$("#current_slide").text(a+1+"/"+(f+1))}if(h==true){if(c.hide_transitions){m.css({height:p+"px"});l.css({height:p+"px"})}else{m.animate({height:p+"px"},c.transition_speed/2);l.animate({height:p+"px"},c.transition_speed/2)}}})};$(function(){if($(".marquee.fade").length>0){$(".marquee.fade").not(".custom").marqueeize({hide_transitions:true})}if($(".marquee:not(.fade),.marquee.slide").length>0){$(".marquee:not(.fade),.marquee.slide").not(".custom").marqueeize()}if($(".marquee.autoplay").length>0){$(".marquee.autoplay").marqueeAutoplay();$(".autoplay .pause").click(function(){var a=$(this).parents(".marquee").first(),b=a.data("autoplay");if(b){$(this).html("play");a.removeClass("autoplay-on").addClass("autoplay-off").data("autoplay",false)}else{$(this).html("pause");a.removeClass("autoplay-off").addClass("autoplay-on").data("autoplay",true)}})}})