/*Marquee.js|@author:ScottMunn.com|@version:0.6.4.2*/function activate_marquee_hashchange(){var a=window.location.hash;var b=$('.marquee-nav li a[href*="'+a+'"]');$("._autoCurrentHash").removeClass("_autoCurrentHash");$.each(b,function(){var a=$(this),b=a.parent("li").index(),c=a.parents(".marquee").first();c.marqueeGoTo(b)});update_current_hashlinks(a)}function update_current_hashlinks(a){$("._autoCurrentHash").removeClass("_autoCurrentHash");if(a!=""&&a!="#"){$('a[href*="'+a+'"]').not('.marquee-nav li a[href*="'+a+'"]').addClass("_autoCurrentHash")}}var global_marquee_settings={css_active_name:"current",fade_text:true,fade_text_selectors:"h1,.summary",hide_transitions:false,transition_speed:500,marquee_caption:"marquee_current_description",autoplay:false,autoplay_slide_duration:4e3,resizable:true,touchstartevent:"ontouchstart"in document.documentElement?"touchstart":"mousedown",touchmoveevent:"ontouchmove"in document.documentElement?"touchmove":"mousemove",touchendevent:"ontouchend"in document.documentElement?"touchend":"mouseup",touchMode:"swipe",enableTouch:true,hoverActivate:false,swipeThreshold:30};$.fn.marqueeize=function(a){var b=global_marquee_settings;if("onhashchange"in window){$(window).bind("hashchange",function(){activate_marquee_hashchange()})}if(window.location.hash){var c=window.location.hash;var d=$('.marquee-nav li a[href="'+c+'"]');if(d.length==1){index=d.parent("li").index();d.parent("li").addClass(b.css_active_name).siblings().removeClass(b.css_active_name);update_current_hashlinks(c)}}return this.each(function(){var c=$(this);if(c.hasClass("hasBeenMarqueed")){}else{if(a){$.extend(b,a)}if(c.hasClass("fixed")){b.resizable=false}if(c.hasClass("hover-activate")){b.hoverActivate=true}c.addClass("hasBeenMarqueed");c.find(".marquee-nav li").on("click",function(a){a.preventDefault();$(this).marqueeClick()});if(b.hoverActivate){c.find(".marquee-nav li").on("mouseover",function(a){a.preventDefault();$(this).marqueeClick()})}c.find(".marquee_prev").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("prev")});c.find(".marquee_next").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("next")});c.find(".marquee_first").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("first")});c.find(".marquee_last").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("last")});c.find(".marquee_random").first().on("click",function(a){a.preventDefault();$(this).parents(".marquee").first().marqueeGoTo("random")});if(b.enableTouch&&!c.hasClass("clickToFocus")){c.on(b.touchstartevent,function(a){$(this).addClass("swiping");var d=a.clientX,e=$(this).find(".marquee-panels").css("margin-left").replace("px","");if(b.touchstartevent=="mousedown"){a.preventDefault()}var f=a.pageX?a.pageX:a.originalEvent.changedTouches[0].pageX,g=a.pageY?a.pageY:a.originalEvent.changedTouches[0].pageY;$(this).data({start_x:f,start_y:g});if(b.touchMode=="drag"){c.addClass("touch-event-occurring");c.on(b.touchmoveevent,function(a){a.preventDefault();var b=a.pageX?a.pageX:a.originalEvent.changedTouches[0].pageX;var f=b-parseInt(d);var g=parseInt(e)+parseInt(f);c.find(".marquee-panels").css("margin-left",g)})}});c.on(b.touchendevent,function(a){c.off(b.touchmoveevent);setTimeout(function(){c.removeClass("touch-event-occurring").removeClass("swiping")},1e3);var d=false;var e,f,g=a.pageX?a.pageX:a.originalEvent.changedTouches[0].pageX,h=a.pageY?a.pageY:a.originalEvent.changedTouches[0].pageY;var i=$(this).data("start_x")-g,j=$(this).data("start_y")-h;if(i<0){e="left"}else if(i>0){e="right"}if(j<0){f="up"}else if(j>0){f="down"}if(Math.abs(i)>Math.abs(j)){if(e=="left"&&Math.abs(i)>b.swipeThreshold){if($(this).find(".marquee-panel."+b.css_active_name).index()!=0){$(this).marqueeGoTo("prev");d=true}else{var k=$(this).find(".marquee-panels").css("margin-left").replace("px","");var l=40;if($(this).attr("data-left-offset")){l=l+$(this).attr("data-left-offset")}$(this).find(".marquee-panels").animate({"margin-left":k+l},200).animate({"margin-left":k},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing");d=true}}else if(e=="right"&&Math.abs(i)>b.swipeThreshold){if($(this).find(".marquee-panel."+b.css_active_name).index()!=parseInt(c.find(".marquee-panel").length-1)){$(this).marqueeGoTo("next");d=true}else{var k=$(this).find(".marquee-panels").css("margin-left").replace("px","");$(this).find(".marquee-panels").animate({"margin-left":k-40},200).animate({"margin-left":k},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing");d=true}}}else{}$(this).data({start_x:null,end_x:null});if(d==false){c.marqueeGoTo("current")}})}c.find(".marquee-nav .caption").hide();c.each(function(){var a=$(this),c=0;var d=a.find(".marquee-nav").first().find("."+b.css_active_name);if(d.length>0){c=d.index()}else{}if(c==0){a.marqueeGoTo("initialize")}else{a.marqueeGoTo(c)}var e=a.find(".marquee-panels").first().children(".marquee-panel").length;a.attr("data-original-length",e);if(a.find(".counter .total").length>0){a.find(".counter .total").html(e)}})}})};$.fn.marqueeClick=function(a){var b=global_marquee_settings;return this.each(function(){if(a){$.extend(b,a)}if($(this).hasClass(b.css_active_name)){return}var c=$(this),d=$(this).parents(".marquee").first(),e=$(this).index();c.addClass(b.css_active_name);$(d).marqueeGoTo(e)})};$.fn.marqueeAutoplay=function(){return this.each(function(){var a=$(this);a.hover(function(){$.data(this,"hover",true)},function(){$.data(this,"hover",false)}).data("hover",false).data("autoplay",true);a.find(".marquee-nav").click(function(){a.data("autoplay",false)});$(this).marqueeAutoplayEnable()})};$.fn.marqueeAutoplayEnable=function(){var a=$(this);var b=setInterval(function(){if(!a.data("hover")&&a.data("autoplay")){a.marqueeGoTo("next")}},global_marquee_settings.autoplay_slide_duration);a.hover(function(){clearInterval(b)},function(){b=setInterval(function(){if(!a.data("hover")&&a.data("autoplay")){a.marqueeGoTo("next")}},global_marquee_settings.autoplay_slide_duration)}).removeClass("autoplay-off").addClass("autoplay-on")};$.fn.marqueeGoTo=function(a,b){if(a==null){a=0}var c=global_marquee_settings;var d=$(this);return this.each(function(){var d=$(this),e=false,f=d.find(".marquee-panels").first().children("."+c.css_active_name).index(),g=d.find(".marquee-panels").first().children(".marquee-panel").length-1;if(f==-1){f=0}switch(a){case"initialize":f=-1;a=0;c.fade_text=false;var h=true;var i=true;break;case"current":a=f;break;case"next":a=parseInt(f+1);break;case"prev":case"previous":a=parseInt(f-1);break;case"last":a=g;break;case"first":a=0;break;case"random":a=f;while(a==f){a=Math.floor(Math.random()*(parseInt(g)+1))}break}if(d.hasClass("infinite")==true){var j=d.find(".marquee-panels").first(),k=$(j).children(".marquee-panel"),l=j.width();if(a==g){k.clone().appendTo(j);j.width(l*2);g=g*2+1}if(a<0){a=g;k.clone().prependTo(j);j.width(l*2);g=g*2+1;a=g;var h=true}}else{if(a<0){a=g}if(a>g){a=0}}if(b!=null){a=b}if(f!=a){var m=d.find(".marquee-panels").first(),n=d.find(".marquee-viewport").first(),o=d.find(".marquee-nav").first(),p=d.find(".marquee-panels").first().find(".marquee-panel:eq("+a+")"),q=p.outerHeight(),r=p.position(),s=m.css("margin-left").replace("px",""),t=parseInt(r.left,10)-parseInt(s,10),u=d.attr("data-left-offset"),v=$(c.fade_text_selectors,d);if(u){t=t-u}var w=d.css("padding-left").replace("px","");t=parseInt(t,10)-parseInt(w,10);o.find("."+c.css_active_name).removeClass(c.css_active_name);o.find("li:eq("+a+")").addClass(c.css_active_name);d.find(".marquee-panels").first().children("."+c.css_active_name).removeClass(c.css_active_name);p.addClass(c.css_active_name);d.removeClass("current-panel-"+d.attr("data-current-panel")).attr("data-current-panel",parseInt(a)+1).addClass("current-panel-"+(parseInt(a)+1));if(a==0){d.addClass("current-panel-first").removeClass("current-panel-last")}else if(a==g){d.addClass("current-panel-last").removeClass("current-panel-first")}else{d.removeClass("current-panel-first current-panel-last")}d.find(".counter .index").html(parseInt(a)+1);if(d.find("."+c.marquee_caption).length){var x=$(o).find("li:eq("+a+") .caption").html();if(x==null){var x=$(o).find("li:eq("+a+")").attr("title")}if(x){$(d).find("."+c.marquee_caption).fadeTo(500,1).html(x)}else{$(d).find("."+c.marquee_caption).fadeTo(500,0)}}t=t*-1;if(c.hide_transitions&&f!=-1||h==true){var y=d.find("h1,.summary");if(y.length>0){y.fadeTo(10,0,function(){m.css({"margin-left":t},1e3,"swing",function(){y.fadeTo(100,1);if(c.resizable==true){n.css({height:q+"px"});m.css({height:q+"px"})}})})}else{m.css({"margin-left":t},1e3,"swing",function(){y.fadeTo(10,1);if(c.resizable==true){n.css({height:q+"px"});m.css({height:q+"px"})}})}}else{if(c.fade_text){v.fadeTo(400,.1)}if($(d).hasClass("fast")==true){c.transition_speed=1}m.animate({"margin-left":t},c.transition_speed,"swing",function(){if(c.resizable==true&&q!=n.height()){n.animate({height:q+"px"},c.transition_speed/2);m.animate({height:q+"px"},c.transition_speed/2)}})}var z=$(d).attr("data-original-length");if(z!=null){$("#current_slide").text(a%z+1+"/"+z)}else{$("#current_slide").text(a+1+"/"+(g+1))}if(i==true){if(c.hide_transitions){n.css({height:q+"px"});m.css({height:q+"px"})}else{n.animate({height:q+"px"},c.transition_speed/2);m.animate({height:q+"px"},c.transition_speed/2)}}if(o){update_current_hashlinks(o.find(".current a").attr("href"))}}})};$(function(){if($(".marquee.fade").length>0){$(".marquee.fade").not(".custom").marqueeize({hide_transitions:true})}if($(".marquee:not(.fade),.marquee.slide").length>0){$(".marquee:not(.fade),.marquee.slide").not(".custom").marqueeize()}if($(".marquee.autoplay").length>0){$(".marquee.autoplay").marqueeAutoplay();$(".autoplay .pause").click(function(){var a=$(this).parents(".marquee").first(),b=a.data("autoplay");if(b){$(this).html("play");a.removeClass("autoplay-on").addClass("autoplay-off").data("autoplay",false)}else{$(this).html("pause");a.removeClass("autoplay-off").addClass("autoplay-on").data("autoplay",true)}})}$(".clickToFocus .marquee-panel").live("click",function(){if(!$(this).closest(".marquee").hasClass("swiping")&&!$(this).hasClass("current")){$(this).closest(".marquee").marqueeGoTo($(this).index())}else{}});$(".clickToFocus .marquee-panel a").live("click",function(a){if(!$(this).closest(".marquee-panel").is(".current")){$(this).closest(".marquee").marqueeGoTo($(this).closest(".marquee-panel").index());return false}})});(function(a,b,c){function j(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var d="hashchange",e=document,f,g=a.event.special,h=e.documentMode,i="on"+d in b&&(h===c||h>7);a.fn[d]=function(a){return a?this.bind(d,a):this.trigger(d)};a.fn[d].delay=50;g[d]=a.extend(g[d],{setup:function(){if(i){return false}a(f.start)},teardown:function(){if(i){return false}a(f.stop)}});f=function(){function n(){var c=j(),e=m(h);if(c!==h){l(h=c,e);a(b).trigger(d)}else{if(e!==h){location.href=location.href.replace(/#.*/,"")+e}}g=setTimeout(n,a.fn[d].delay)}var f={},g,h=j(),k=function(a){return a},l=k,m=k;f.start=function(){g||n()};f.stop=function(){g&&clearTimeout(g);g=c};a.browser.msie&&!i&&function(){var b,c;f.start=function(){if(!b){c=a.fn[d].src;c=c&&c+j();b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||l(j());n()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow;e.onpropertychange=function(){try{if(event.propertyName==="title"){b.document.title=e.title}}catch(a){}}}};f.stop=k;m=function(){return j(b.location.href)};l=function(c,f){var g=b.document,h=a.fn[d].domain;if(c!==f){g.title=e.title;g.open();h&&g.write('<script>document.domain="'+h+'"</script>');g.close();b.location.hash=c}}}();return f}()})(jQuery,this)